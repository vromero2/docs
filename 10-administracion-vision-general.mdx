# Administrador – Visión General

El módulo de **Administrador** funciona como el **panel de control central del sistema**, desde donde se configuran y gestionan los principales parámetros operativos y estructurales de la clínica odontológica. Este módulo está diseñado para brindar un control integral sobre el funcionamiento del sistema, asegurando una administración ordenada, segura y adaptable a las necesidades de cada institución.

Desde el módulo de Administrador se gestionan los **usuarios del sistema**, definiendo roles, permisos y niveles de acceso según las funciones y responsabilidades de cada miembro del equipo. Esta configuración permite garantizar la confidencialidad de la información, optimizar los flujos de trabajo y asegurar que cada usuario acceda únicamente a las herramientas y datos correspondientes a su rol.

Asimismo, el módulo permite la configuración de **categorías, plantillas y estructuras de datos**, facilitando la estandarización de procesos, la organización de la información y la personalización del sistema de acuerdo con la dinámica particular de la clínica. A través de estas opciones, es posible adaptar formularios, documentos y criterios operativos a los requerimientos administrativos y clínicos.

---

## ¿Qué Puedes Hacer en Este Módulo?

### Gestión de Personal

- **Staff**: Crear y gestionar usuarios del sistema
- **Horarios**: Configurar disponibilidad de cada doctor
- **Permisos**: Asignar qué puede hacer cada usuario
- **Contratos**: Gestionar contratos laborales del personal

### Configuración del Sistema

- **Listas y Categorías**: Organizar tratamientos, diagnósticos, gastos
- **Tratamientos y Acciones**: Definir procedimientos disponibles
- **Plantillas**: Crear formatos para recetas, consentimientos, presupuestos
- **Estados del Calendario**: Personalizar estados de citas
- **Cajas**: Configurar puntos de cobro

### Organización

- **Organizaciones/Clínicas**: Gestionar información de la clínica
- **Recordatorios**: Configurar notificaciones automáticas

---

## Acceso al Módulo

### Desde el Menú Lateral

Haz clic en **"Administración"** en el menú lateral.

**Permisos Variables**: Cada sub-sección requiere permisos específicos. Generalmente solo **Super Admin** y **Admin** tienen acceso completo.

[IMAGEN: Menú lateral con Administración]

---

## 1. Staff (`/admin/staff`)

### Ver Lista de Personal

**Ruta**: `/admin/staff` **Permiso**: `list_staff`

**Información visible**:

- Foto de perfil
- Nombre completo
- Email
- Rol (Admin, Doctor, Secretaria, etc.)
- Estado (Activo/Inactivo)
- Acciones (Editar, Horarios, Permisos)

![Para El Chatcito 9](/images/Paraelchatcito9.png)

### Agregar Nuevo Usuario

**Permiso**: `add_staff` (solo Super Admin)

**Pasos**:

1. Clic en **"Agregar Personal"**
2. Completar formulario:
   - **Datos personales**: Nombre, apellido, email, teléfono
   - **Credenciales**: Email (usuario) y contraseña inicial
   - **Rol**: Seleccionar rol predefinido
   - **Estado**: Activo/Inactivo
3. Guardar

**El usuario recibirá**:

- Email con credenciales de acceso
- Link para cambiar contraseña
- Instrucciones de primer ingreso

### Editar Usuario

**Permiso**: `edit_staff`

Modificar datos personales, cambiar rol o desactivar usuario.

**Nota**: No puedes editar tu propio rol o eliminar tu propio usuario.

---

## 2. Horarios de Trabajo (`/admin/staff/:id/schedules`)

Configura los días y horarios en que cada doctor está disponible para atender.

**Ruta**: `/admin/staff/:id/schedules` **Permiso**: `manage_schedules` (implícito en gestión de staff)

### Configuración de Horarios

**Por día de la semana**:

- Lunes a Domingo
- Para cada día:
  - **Horario de entrada**: Ej: 09:00
  - **Horario de salida**: Ej: 18:00
  - **Pausas**: Ej: Almuerzo de 13:00 a 14:00
  - **Activo/Inactivo**: Si trabaja ese día

**Ejemplo**:

```
Lunes:    09:00 - 13:00 | 14:00 - 18:00 (Activo)
Martes:   09:00 - 13:00 | 14:00 - 18:00 (Activo)
Miércoles: No trabaja (Inactivo)
Jueves:   09:00 - 13:00 | 14:00 - 18:00 (Activo)
Viernes:  09:00 - 13:00 | 14:00 - 18:00 (Activo)
Sábado:   10:00 - 14:00 (Activo)
Domingo:  No trabaja (Inactivo)
```

**Uso**: El sistema usará estos horarios para:

- Mostrar disponibilidad en la agenda
- Evitar agendar citas fuera de horario
- Calcular horas trabajadas

![Para El Chatcito 47](/images/Paraelchatcito47.png)

---

## 3. Permisos de Usuario (`/admin/staff/:id/permissions`)

Asigna permisos granulares a cada usuario.

**Ruta**: `/admin/staff/:id/permissions` **Permiso**: `manage_permissions`

### Interfaz de Permisos

El sistema muestra un **árbol de permisos** organizado por módulos:

```
☐ Pacientes
  ☐ Listar pacientes (list_patients)
  ☐ Agregar paciente (add_patient)
  ☐ Editar paciente (edit_patient)
  ☐ Eliminar paciente (delete_patient)

☐ Expediente Clínico
  ☐ Ver expediente (view_expedient)
  ☐ Agregar antecedentes (add_background)
  ☐ Agregar evolución (add_evolution)

☐ Agenda
  ☐ Ver calendario (list_calendar)
  ☐ Crear citas (add_appointment)
  ...
```

**Funcionalidades**:

- **Seleccionar todo un módulo**: Marca todos los permisos del módulo
- **Seleccionar individual**: Marca permisos específicos
- **Guardar**: Aplica cambios inmediatamente

**Advertencia**: Cambios en permisos requieren que el usuario cierre sesión y vuelva a ingresar para aplicarse.

![Permisos.png](/images/Permisos.png)

---

## 4. Contratos de Personal (`/admin/staff/contracts`)

Gestión de contratos laborales.

**Ruta**: `/admin/staff/contracts` **Permiso**: `list_contracts`

**Información de Contrato**:

- Empleado
- Tipo de contrato (Tiempo completo, Part-time, Por servicio)
- Fecha de inicio
- Fecha de fin (si aplica)
- Salario base
- Comisión (%)
- Observaciones

**Acciones**:

- Ver contratos activos/vencidos
- Crear nuevo contrato
- Editar contrato existente
- Finalizar contrato

**Uso típico**: Liquidación de sueldos, cálculo de comisiones.

---

## 5. Clínicas (`/admin/organizations`)

Información de la clínica o clínicas (si hay múltiples sedes).

**Ruta**: `/admin/organizations` **Permiso**: `list_clinics`

**Información de la Organización**:

- Nombre comercial
- Razón social
- CUIT/RUT/RFC (según país)
- Dirección completa
- Teléfonos de contacto
- Email institucional
- Logo de la clínica
- Configuración fiscal

### 

## 6. Prestaciones (`/admin/lists`)

Organización de tratamientos, diagnósticos y otros elementos.

**Ruta**: `/admin/lists` **Permiso**: `list_categories`

### Tipos de Listas

Las listas estan divididas de dos maneras:

1. Segun la divisa que se utilice (peso, dolar)
2. Segun el seguro médico (Osde, Omint, etc)

Las distintas divisiones son completamente personalizables, y se pueden agregar a gusto del usuario.

![Para El Chatcito 31](/images/Paraelchatcito31.png)

#### Categorías de Tratamientos

Agrupaciones de procedimientos odontológicos:

- Operatoria
- Endodoncia
- Prótesis
- Cirugía
- Ortodoncia
- Periodoncia
- Prevención

### Gestionar Categorías

**Acciones disponibles**:

- **Ver categorías**: Lista completa
- **Agregar categoría**: Crear nueva agrupación
- **Editar categoría**: Cambiar nombre o descripción
- **Eliminar categoría**: Borrar si no tiene elementos asociados
- **Ver acciones**: Ir a detalle de tratamientos de esa categoría

![image.png](/Categoriasdelistas.png)

---

## 7. Tratamientos y Acciones (`/admin/lists/categories/actions/:id`)

Detalle de tratamientos de una categoría específica.

**Ruta**: `/admin/lists/categories/actions/:id`

**Información de cada Tratamiento**:

- Nombre del procedimiento
- Código (si aplica)
- Precio sugerido
- Duración estimada
- Descripción

**Acciones**:

- Agregar nuevo tratamiento
- Editar tratamiento existente
- Eliminar tratamiento (si no está en uso)
- Cambiar precio

**Uso**: Estos tratamientos aparecerán en:

- Creación de presupuestos
- Planificación odontológica
- Facturación

---

## 8. Plantillas (`/admin/templates`)

Formatos predefinidos para documentos frecuentes.

**Ruta**: `/admin/templates` **Permiso**: `list_templates`

### Tipos de Plantillas

#### A. Consentimientos Informados (`/admin/templates/consents`)

Documentos legales que el paciente firma antes de tratamientos.

**Ejemplos**:

- Consentimiento para cirugía
- Consentimiento para ortodoncia
- Consentimiento para implantes

**Campos dinámicos**:

- `{{paciente_nombre}}` - Se reemplaza con nombre del paciente
- `{{paciente_documento}}` - Documento del paciente
- `{{fecha}}` - Fecha actual
- `{{doctor_nombre}}` - Nombre del doctor
- `{{tratamiento}}` - Procedimiento a realizar

#### B. Comentarios de Presupuesto (`/admin/templates/budget`)

Texto estándar que se agrega a presupuestos.

**Ejemplos**:

- Condiciones de pago
- Garantías
- Instrucciones post-tratamiento
- Términos y condiciones

### Crear/Editar Plantilla

- Escribir texto libremente
- Formato (negrita, cursiva, tamaño de fuente)
- Insertar campos dinámicos
- Vista previa antes de guardar

![image.png](/Ediciondeplantillas.png)

---

## 9. Cajas de Cobro (`/admin/boxes`)

Configuración de puntos de cobro.

**Ruta**: `/treasury/accounts/account`

**Información de cada Caja**:

- Nombre (Ej: "Caja Principal", "Banco Santander", "POS Visa")
- Tipo (Efectivo, Banco, Tarjeta)
- Moneda principal
- Saldo inicial
- Estado (Activa/Inactiva)

**Acciones**:

- Crear nueva caja
- Editar caja existente
- Activar/Desactivar caja
- Ver movimientos de la caja

**Nota**: Las cajas no editables en cuanto a divisas son aquellas ya configuradas con transacciones.

---

## 10. Recordatorios (`/admin/reminders`)

Configuración de notificaciones automáticas a pacientes.

**Ruta**: `/admin/reminders`

**Tipos de Recordatorios**:

- **24 horas antes**: Recordatorio de cita para mañana
- **Confirmación de cita**: Al agendar nueva cita
- **Recordatorio de pago**: Pacientes con deuda
- **Cumpleaños**: Saludo automatizado

**Configuración**:

- Activar/Desactivar recordatorio
- Mensaje personalizado
- Canal (Email, SMS, WhatsApp)
- Horario de envío

**Variables dinámicas en mensajes**:

- `{{paciente}}` - Nombre del paciente
- `{{fecha}}` - Fecha de la cita
- `{{hora}}` - Hora de la cita
- `{{doctor}}` - Doctor asignado
- `{{clinica}}` - Nombre de la clínica

![Para El Chatcito 48](/images/Paraelchatcito48.png)

## 11. Automatizaciones (`/admin/automatizations`)

El apartado de **Automatizaciones** centraliza distintas funciones que permiten optimizar y automatizar procesos clave de la clínica, reduciendo tareas manuales y mejorando la comunicación con los pacientes.

Actualmente, el sistema cuenta con tres automatizaciones principales. La primera es el **Recordatorio de Citas por mail**, que envía automáticamente un correo al paciente para que pueda **confirmar o cancelar su cita en un solo clic**. La segunda es el **Recordatorio de Citas por WhatsApp**, que cumple la misma función que el recordatorio por mail, pero a través de WhatsApp, y que estará **próximamente disponible** en el sistema. Por último, se encuentra la automatización de **Vencimiento de Presupuestos**, que permite a cada clínica definir si los presupuestos deben vencer automáticamente y **configurar la cantidad de días** que transcurren hasta su vencimiento.

Todas estas automatizaciones son **totalmente configurables**, permitiendo que cada clínica adapte su funcionamiento a sus propios criterios y necesidades operativas.

![Para El Chatcito 10](/images/Paraelchatcito10.png)

---

## Permisos Generales del Módulo

| Sección            | Permiso Principal      | Solo Admin |
| ------------------ | ---------------------- | :--------: |
| Personal           | `list_staff`           | ✅          |
| Agregar Personal   | `add_staff`            | ✅          |
| Editar Personal    | `edit_staff`           | ✅          |
| Horarios           | (implícito con staff)  | ✅          |
| Permisos           | `manage_permissions`   | ✅          |
| Contratos          | `list_contracts`       | ✅          |
| Organizaciones     | `list_clinics`         | ✅          |
| Categorías         | `list_categories`      | ✅          |
| Agregar Categorías | `add_category`         | ✅          |
| Plantillas         | `list_templates`       | ✅          |
| Editar Plantillas  | `edit_template`        | ✅          |
| Estados Calendario | `list_calendar_status` | ✅          |
| Cajas              | `----------`           | ✅          |

---

## Consejos y Mejores Prácticas

### Gestión de Personal

1. **Roles claros**: Define bien qué puede hacer cada rol
2. **Principio de menor privilegio**: Solo otorga los permisos necesarios
3. **Revisión periódica**: Audita permisos cada 3-6 meses
4. **Desactivar, no eliminar**: Si alguien se va, desactiva su cuenta en lugar de borrarla

### Organización de Categorías

1. **Categorías lógicas**: Agrupa tratamientos de forma coherente
2. **Nombres consistentes**: Usa nomenclatura estándar
3. **Evitar duplicados**: Verifica antes de crear nueva categoría
4. **Mantener actualizado**: Revisa precios de tratamientos regularmente

### Plantillas

1. **Lenguaje claro**: Usa términos comprensibles para pacientes
2. **Legal**: Consulta con abogado para consentimientos
3. **Variables dinámicas**: Aprovecha campos personalizables
4. **Versiones**: Guarda copias antiguas antes de grandes cambios

### Seguridad

1. **Contraseñas fuertes**: Exige al crear usuarios
2. **Cambio periódico**: Recomienda cambiar contraseña cada 3 meses
3. **Sesiones únicas**: No compartir credenciales
4. **Logs de auditoría**: Revisa quién hace qué (si disponible)

---

## Errores Comunes

### No puedo ver el módulo de Administración

**Causa**: No tienes permisos de administrador **Solución**: Solo Admin y Super Admin tienen acceso

### No puedo editar permisos de un usuario

**Causa**: Solo Super Admin puede gestionar permisos **Solución**: Contacta al Super Administrador

### Las plantillas no se guardan

**Causa**: Campos dinámicos mal escritos o caracteres especiales **Solución**: Verifica sintaxis de variables `{{variable}}`

### No puedo eliminar una categoría

**Causa**: La categoría tiene tratamientos o presupuestos asociados **Solución**: No es posible eliminar para mantener integridad de datos

---