# Roles y Permisos – Visión General

Oclü incorpora un **sistema de roles y permisos** diseñado para regular y controlar el acceso de los usuarios a las distintas funcionalidades del sistema. Este esquema permite definir con precisión **quién puede acceder, visualizar o modificar cada módulo y acción**, de acuerdo con las responsabilidades y funciones que cumple cada integrante del equipo dentro de la clínica.

A través de la asignación de roles, el sistema posibilita configurar distintos **niveles de acceso**, garantizando que cada usuario interactúe únicamente con la información y las herramientas necesarias para su tarea. De este modo, se protege la **confidencialidad de los datos clínicos y administrativos**, se reducen errores operativos y se promueve un uso ordenado y responsable del sistema.

---

## ¿Qué es un Permiso?

Un **permiso** es una autorización para realizar una acción específica en el sistema.

**Ejemplos**:

- "Crear pacientes"
- "Ver reportes financieros"
- "Eliminar citas"
- "Editar presupuestos"

Cada usuario tiene un conjunto de permisos según su rol en la clínica.

---

## ¿Qué es un Rol?

Un **rol** es un conjunto predefinido de permisos que se ajusta a una función laboral.

**Ejemplo**: El rol "Secretaria" incluye permisos para agendar citas, cobrar y ver pacientes, pero NO para acceder a reportes financieros completos.

---

## Roles Disponibles

###1. Super Administrador ⭐⭐⭐⭐⭐

**Quién es**: El dueño o director de la clínica

**Permisos**: **TODO**

- Control total del sistema
- Crear y eliminar usuarios
- Modificar cualquier configuración
- Acceso a toda la información
- Gestionar permisos de otros usuarios

**Responsabilidades**:

- Configuración inicial de la clínica
- Gestión del equipo
- Decisiones críticas del sistema

**Cantidad recomendada**: 1 persona (máximo 2)

---

### 2. Administrador ⭐⭐⭐⭐

**Quién es**: Gerente o encargado administrativo

**Puede**:

- ✅ Ver y gestionar pacientes
- ✅ Agendar y gestionar citas
- ✅ Registrar pagos y ver finanzas
- ✅ Ver todos los reportes
- ✅ Gestionar personal (limitado)
- ✅ Configurar categorías y plantillas

**No puede**:

- ❌ Eliminar pacientes
- ❌ Crear o eliminar usuarios
- ❌ Modificar permisos de otros
- ❌ Cambiar configuraciones críticas

**Responsabilidades**:

- Gestión diaria de la clínica
- Supervisión financiera
- Reportes y análisis
- Apoyo al personal

---

### 3. Doctor / Odontólogo ⭐⭐⭐

**Quién es**: Profesionales que atienden pacientes

**Puede**:

- ✅ Ver y crear pacientes
- ✅ Ver expediente clínico completo
- ✅ Crear y editar presupuestos
- ✅ Agregar evoluciones y tratamientos
- ✅ Generar recetas y consentimientos
- ✅ Subir y ver multimedia clínica
- ✅ Ver su propia agenda
- ✅ Ver su propia producción

**No puede**:

- ❌ Eliminar pacientes
- ❌ Ver reportes financieros completos
- ❌ Modificar configuraciones
- ❌ Acceder a información de otros doctores (según configuración)

**Responsabilidades**:

- Atención clínica de pacientes
- Registro de tratamientos
- Creación de presupuestos
- Diagnóstico y planificación

---

### 4. Secretaria / Recepcionista ⭐⭐

**Quién es**: Personal de recepción y atención al paciente

**Puede**:

- ✅ Ver y crear pacientes (datos básicos)
- ✅ Agendar, editar y cancelar citas
- ✅ Ver calendario completo
- ✅ Registrar pagos y generar recibos
- ✅ Ver balance de pacientes

**No puede**:

- ❌ Ver expediente clínico completo
- ❌ Crear o editar presupuestos
- ❌ Agregar evoluciones médicas
- ❌ Ver reportes financieros
- ❌ Acceder a multimedia clínica (fotos intraorales, radiografías)

**Responsabilidades**:

- Gestión de citas y agenda
- Atención telefónica y presencial
- Cobros y recibos
- Recordatorios de turnos

---

### 5. Auxiliar Dental ⭐

**Quién es**: Asistente del odontólogo

**Puede**:

- ✅ Ver lista de pacientes
- ✅ Ver expediente clínico (solo lectura)
- ✅ Subir fotos y archivos multimedia
- ✅ Organizar archivos multimedia
- ✅ Ver agenda (solo lectura)

**No puede**:

- ❌ Crear o editar pacientes
- ❌ Agendar citas
- ❌ Crear presupuestos
- ❌ Agregar evoluciones
- ❌ Registrar pagos
- ❌ Ver información financiera

**Responsabilidades**:

- Apoyo durante consultas
- Subir fotos y radiografías
- Organizar multimedia del paciente
- Preparación de materiales

---

## Resumen Comparativo

| Función                      | Super Admin | Admin | Doctor | Secretaria | Auxiliar    |
| ---------------------------- | :---------: | :---: | :----: | :--------: | :---------: |
| **Crear pacientes**          | ✅           | ✅     | ✅      | ✅          | ❌           |
| **Eliminar pacientes**       | ✅           | ❌     | ❌      | ❌          | ❌           |
| **Ver expediente clínico**   | ✅           | ✅     | ✅      | ❌          | ✅ (lectura) |
| **Crear presupuestos**       | ✅           | ✅     | ✅      | ❌          | ❌           |
| **Agendar citas**            | ✅           | ✅     | ✅      | ✅          | ❌           |
| **Registrar pagos**          | ✅           | ✅     | ❌      | ✅          | ❌           |
| **Ver reportes financieros** | ✅           | ✅     | ❌      | ❌          | ❌           |
| **Crear usuarios**           | ✅           | ❌     | ❌      | ❌          | ❌           |
| **Gestionar permisos**       | ✅           | ❌     | ❌      | ❌          | ❌           |
| **Subir multimedia**         | ✅           | ✅     | ✅      | ❌          | ✅           |

---

## ¿Cómo Sé Qué Permisos Tengo?

### Método 1: Observar el Menú Lateral

Solo verás los módulos a los que tienes acceso.

**Ejemplo**:

- Si ves "Tesorería" → Tienes permisos financieros
- Si NO ves "Tesorería" → No tienes acceso a finanzas

### Método 2: Intentar una Acción

Si un botón no aparece o está deshabilitado, no tienes permiso para esa acción.

**Ejemplo**:

- No ves botón "Eliminar paciente" → No tienes permiso para eliminar
- Ves el botón "Agregar paciente" → Sí tienes permiso para crear

### Método 3: Mensajes del Sistema

Si intentas algo sin permiso, verás:

> "No tienes permisos suficientes para esta acción"

---

## ¿Cómo Se Asignan los Permisos?

1. El **Super Administrador** o **Administrador** va a: **Administración → Personal**
2. Selecciona el usuario
3. Hace clic en **"Permisos"**
4. Ve un árbol con todos los permisos del sistema
5. Marca o desmarca los permisos específicos
6. Guarda los cambios

**Los cambios aplican** cuando el usuario cierra sesión y vuelve a ingresar.

---

## Personalizar Permisos

Aunque existen roles predefinidos, **cada usuario puede tener permisos personalizados**.

**Ejemplo**: Un doctor que también administra puede tener:

- Todos los permisos de "Doctor"
- Más algunos permisos de "Admin" (como ver reportes)

Esto se configura de forma individual según las necesidades de tu clínica.

---

## Mejores Prácticas

### ✅ Principio de Menor Privilegio

**Otorga solo los permisos estrictamente necesarios.**

No des más accesos de los que la persona necesita para hacer su trabajo.

**Ejemplo**: Si un auxiliar solo sube fotos, no le des permiso para ver finanzas.

### ✅ Revisión Periódica

Revisa los permisos cada 3-6 meses:

- ¿Cambió alguien de rol?
- ¿Alguien necesita más o menos accesos?
- ¿Hay usuarios que ya no trabajan en la clínica?

### ✅ No Compartir Credenciales

**Cada persona debe tener su propia cuenta** con sus permisos específicos.

❌ **NO hagas esto**:

- "Usa mi usuario para registrar ese pago"
- "Comparto mi contraseña con la otra secretaria"

**¿Por qué?**

- Todo lo que se haga con tu usuario quedará registrado a tu nombre
- Pierdes control sobre quién accede a qué
- Problemas de responsabilidad legal

### ✅ Revocar Accesos Inmediatamente

Si alguien deja de trabajar en la clínica:

- **Desactiva su usuario el mismo día**
- O cambia su contraseña de inmediato
- Esto evita accesos no autorizados

---

## Preguntas Frecuentes

### ¿Puedo cambiar mi propio rol?

**No**, solo el Super Administrador puede cambiar roles.

Esto garantiza que solo personas autorizadas gestionen permisos.

### Necesito un permiso adicional, ¿qué hago?

1. Identifica qué permiso necesitas (ej: "crear presupuestos")
2. Habla con el administrador de tu clínica
3. Explica por qué lo necesitas
4. El administrador evaluará y te lo otorgará si corresponde

### ¿Por qué algunos botones aparecen en gris?

**Dos razones**:

1. **No tienes permiso**: El botón está deshabilitado porque no puedes usarlo
2. **Faltan requisitos**: Por ejemplo, "Crear presupuesto" puede estar deshabilitado si el paciente no tiene datos completos

### ¿Puedo ver qué permisos tiene otro usuario?

Solo si eres **Super Administrador** o **Administrador**.

Puedes:

1. Ir a **Administración → Personal**
2. Seleccionar el usuario
3. Hacer clic en **"Ver permisos"**

---

## Glosario de Permisos Comunes

| Permiso              | Qué Permite                    |
| -------------------- | ------------------------------ |
| `list_patients`      | Ver lista de pacientes         |
| `add_patient`        | Crear nuevo paciente           |
| `edit_patient`       | Modificar datos del paciente   |
| `delete_patient`     | Eliminar paciente (permanente) |
| `view_expedient`     | Ver historia clínica completa  |
| `add_evolution`      | Agregar evoluciones médicas    |
| `list_calendar`      | Ver el calendario de citas     |
| `add_appointment`    | Agendar turnos                 |
| `delete_appointment` | Cancelar/eliminar citas        |
| `add_budget`         | Crear presupuestos             |
| `approve_budget`     | Aprobar presupuestos           |
| `register_payment`   | Registrar cobros               |
| `see_report_sales`   | Ver reporte de ventas          |
| `see_report_debtors` | Ver pacientes deudores         |
| `list_staff`         | Ver lista de personal          |
| `manage_permissions` | Gestionar permisos de usuarios |

---

## Seguridad y Responsabilidad

### Cada Usuario es Responsable

Todo lo que hagas con tu usuario queda registrado en el sistema:

- Quién creó un paciente
- Quién registró un pago
- Quién eliminó una cita
- Quién modificó un presupuesto

**Por eso es importante**:

- No compartir tu contraseña
- Cerrar sesión al terminar
- Usar el sistema de forma responsable

### Auditoría

El sistema guarda un historial de acciones:

- **Quién** hizo algo
- **Qué** hizo
- **Cuándo** lo hizo
- **Desde dónde** (dispositivo, ubicación)

Esto permite rastrear cambios y garantizar la seguridad.

---

## Necesitas Más Información

Para configuraciones avanzadas de permisos o dudas específicas, contacta al administrador de tu clínica o al equipo de soporte de Oclü.